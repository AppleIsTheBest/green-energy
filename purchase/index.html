<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content ="width=device-width,initial-scale=1,user-scalable=yes" />
  <link rel="stylesheet" type="text/css" href="../index.css">
    <link href="../Quicksand-Light.ttf" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
  <script src="../jquery-3.1.1.min.js"></script>
<link rel="icon" type="image/png" href="https://appleisthebest.github.io/ebikes-transportation/EBikesLogoModified.png">
  <script type="text/javascript" src="../index.js"></script>
    <script src="index.js"></script>
  <title>Purchase</title>

    <style>
        .date{
            margin-right: 350;
        }
        .selectMenu{
            margin-right: 350;
        }   
        .RegularWhiteText{
            color: white;
        }
      body {
  max-width: 100%;
  height: auto;
  width: auto\9; /* ie8 */
}

    a:hover {

      color: grey;

    }

    .button {

      color: #000000;

    }  
        
    .hyperlink {
      color: #0099ff;
    }
    .hyperlink:visited {
      color: #0099ff;
    }
    </style>
</head>
<body>
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
    <div id="titlename"><p id="menu-button" style="font-size: 20px;">  Cursoriam</p></div>
   <nav>
   <a class="navlink" href="../">Home</a>
    <a class="navlink" margin-left="15" href="../products/">Events and Products</a>
    <a class="navlink" href="../purchase/">Sign Up</a>
    <a class="navlink" href="../contact/">Contact Us</a>
    <a class="navlink" href="../resources/">Support</a>
    <a class="navlink" href="../resources/Feedback.html">Feedback</a>
  </nav>
      <h1 class="tc">Register</h1>
    <form>
        <!-- Currently not working. 405 Error. Not sure how to fix. -->
    <article class="c form">
    <script>
        function getUrlVars() {
            var vars = {};
            var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
                vars[key] = value;
            });
            return vars;
        }
        var param = getUrlVars()["product"];
        var product = document.getElementById("test").value
        product = param;
        if (product == "Select"){
            alert("Please select a product.")
        }    
    </script>
    </div>
    <h2>Your Information</h2>
    <div class="flex-container">
        <div class="label-input-container tworow">
            <label class="RegularWhiteText">First Name</label>
            <input class="" name="First name" type="text" id="require" required><br>
        </div>
        <div class="label-input-container tworow">
            <label class="RegularWhiteText">Last Name</label>
            <input class="" name="Last name" type="text" id="require" required>
        </div>
    </div>
    <h2>Contact Information</h2>
    <div class="flex-container">
        <div class="label-input-container tworow">
            <label class="RegularWhiteText">E-Mail Address</label>
            <input name="e-mail address" type="email" placeholder="Ex: example@example.com" required>
        </div>
        <div class="label-input-container tworow">
            <label class="RegularWhiteText">Phone Number</label>
            <input name="phone number" type="text" placeholder="Ex: 1234567890 or (123)456-7890" required>
        </div>
    </div>
        <label class="RegularWhiteText">Age</label>
    <input type="number" name="age" class="tworow" onchange="checkAge(this);" required>
    <script>
        function checkAge(input) {
            var age = input.value;
            if (age < 18) alert("You must be 18 or older to sign up.");
            if (age < 18) input.value = null;
        }
    </script>
    <h2>Payment Information</h2>
    <div class="flex-container">
        <div class="label-input-container tworow">
            <label class="RegularWhiteText">Card Type</label>
            <select class="select" required>
                <option value="">Select</option>
                <option value="debit">Debit</option>
                <option value="credit">Credit</option>
            </select>
        </div>
        <div class="label-input-container tworow">
            <label class="RegularWhiteText">Card Issuer</label>
            <select class="select" required>
                <option value="">Select</option>
                <option value="visa">Visa</option>
                <option value="discover">Discover</option>
                <option value="mastercard">Mastercard</option>
                <option value="amex">American Express (Amex)</option>
            </select>
        </div>
    </div>
    <div class="flex-container">
       <div class="label-input-container threerow">
           <label class="RegularWhiteText">Card Number</label>
           <input name="credit card" type="text" placeholder="16 Digits Long" onchange="verifyCard(this);" required>
           <script>
               function verifyCard(input) {
                   if (input == null) return;
                   if ((input.value.toString().length != 16) || (isNaN(Number(input.value)))) {
                       alert("Your card number must consist of only numbers and must be 16 digits.");
                       input.value = null;
                       return;
                   }
                   if (Number(input.value) < 0) {
                       input.value = null;
                   }
               }
           </script>
       </div>  
       <div class="label-input-container threerow">
           <label class="RegularWhiteText">Expiration Date</label>
           <input class="" name="Expiration" type="text" placeholder="mm/yy" required>
       </div> 
       <div class="label-input-container threerow">
           <label class="RegularWhiteText">Three Digit Security Code (CVC/CVV)</label>
           <input class="" name="CCV" type="number" placeholder="Found on the back of your card." onchange="verifyCode(this);" required>
           <script>
               function verifyCode(input) {
                   if (input == null) return;
                   if ((input.value.toString().length != 3) || isNaN(Number(input.value))) {
                       alert("Your card number must consist of only numbers and must be 16 digits.");
                       input.value = null;
                       return;
                   }
                   if (Number(input.value) < 0) {
                       input.value = null;
                   }
               }
           </script>
       </div>
    </div>
        <h2 id="event_product_header">Product Information</h2>
        <div class="flex-container">
        <div class="label-input-container tworow">
            <label class="RegularWhiteText" id="customMessage">Custom Message on Certficate*</label>
            <input class="" type="text" onchange="if (this.value.toString().length > 30) this.value = this.value.substr(0,30);" placeholder="Enter up to 30 characters">
        </div>
        <div class="label-input-container tworow">
            <label class="RegularWhiteText" id="quantity">How many people are in your party?</label>
            <input class="" type="number" id="require" onchange="handleChange(this);" placeholder="Up to 10 per registration" name="quantityInput" required>
            <script>
                function handleChange(input) {
                    if (input.value < 1) input.value = 1;
                    if (input.value > 10) input.value = 10;
                    calculateTotal();
                }
            </script><br>
        </div>
    </div>
            <label class="RegularWhiteText">Which event/product?</label>
    <div class="flex-container">
        <select id="escape-room-select" class="selectMenu" onchange="handleSelectionChange(this)" required>
            <option value="">Select</option>
            <option value="ldevent" data-hours="1">Intro to Leadership</option>
            <option value="mhevent" data-hours="0.5">Mental Health and Awareness</option>
            <option value="lguide" data-hours="0.5">A Guide to Leadership</option>
            <option value="wguide">A Guide to Wellness</option>
        </select>
        <script>
            function handleSelectionChange(input) {
                console.log("called");
                if (input.value == "ldevent" || input.value == "mhevent") {
                    document.getElementById("customMessage").innerText = "Custom Message on Certificate*";
                    document.getElementById("quantity").innerText = "How many people are in your party?";
                    document.getElementsByName("quantityInput")[0].placeholder = "Up to 10 per registration";
                    document.getElementById("event_product_header").innerText = "Event Information";
                }
                if (input.value == "lguide" || input.value == "wguide") {
                    document.getElementById("customMessage").innerText = "Custom Message with Purchase*"
                    document.getElementById("quantity").innerText = "How many copies?";
                    document.getElementsByName("quantityInput")[0].placeholder = "Up to 10 per order";
                    document.getElementById("event_product_header").innerText = "Product Information";
                }
                calculateTotal();
            }
        </script>
    </div>
    <div>
        <h2>Disclaimers & Terms/Conditions</h2>
        <label class="RegularWhiteText">I agree to all of the <a href="" class="hyperlink" target="_blank">terms and conditions</a>.
        <input type="checkbox" required>
    </div>
    <p id="subtotal">Subtotal: Please select an event/product and enter a quantity.</p>
    <script>
        function calculateTotal() {
            if (document.getElementsByName("quantityInput")[0].value != null && document.getElementById("escape-room-select").value != null) {
                var quantity = document.getElementsByName("quantityInput")[0].value;
                var priceDictionary = {"ldevent": 45, "mhevent": 30, "lguide": 75, "wguide": 65};
                document.getElementById("subtotal").innerText = "Subtotal: $" + priceDictionary[document.getElementById("escape-room-select").value] * quantity + ".00";
            }
        }
    </script>
    <button class="button mt32" action="alert('Thank you for signing up!'); window.location.href = '/products';">Register Now</button>
    </article>
</form>
<footer>
  <p style="font-size: 12px;">*The custom message is subject to review. Direction Inc. reserves the right to not include the message at our discretion.</p>
  <p>Copyright © 2021 Direction Inc. All rights reserved</p>
  <p>PLEASE NOTE: If you are using a mobile device to view this web page, please turn off portrait orientation lock, and turn the device on its side.</p>
</footer>
</body>
</html>
